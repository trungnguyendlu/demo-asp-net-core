(function(n,t){var i={};n.media=n.media||{};n.media.init=function(t){n.media.setOptions(t);n.common.applyReturn(i.searchFormInput,n.media.search)};n.media.setOptions=function(n){i=t.extend(i,n)};n.media.search=function(r){t(i.pageNumber).val(r||1);n.common.postForm(i.searchUrl,i.searchForm,function(n){t(i.resultContent).html(n)})};n.media.initDropZone=function(){t("#dropzone").dropzone({paramName:"file",maxFiles:10,maxFilesize:2,acceptedFiles:".jpeg,.jpg,.png,.gif",dictFileTooBig:"Kích thước file hình ảnh không được vượt quá 2MB",dictDefaultMessage:"Kéo file vào đây để upload <span>hoặc CLICK<\/span>",init:function(){this.on("complete",function(){this.getUploadingFiles().length===0&&this.getQueuedFiles().length===0&&(n.common.hideModal("#modal"),n.media.search(1))});this.on("error",function(t,i){n.common.errorNotify(i)})}})};n.media.create=function(){n.media.detail(i.createUrl,{},"Thêm hình ảnh mới")};n.media.edit=function(t){n.media.detail(i.editUrl,{id:t},"Cập nhật hình ảnh")};n.media.detail=function(r,u,f){n.common.get(r,u,function(r){r!==null?(n.common.showModal(r,f,"modal-lg",'<button type="button" class="btn btn-primary" onclick="comdy.media.save()"><i class="fa fa-save"><\/i>&nbsp;Lưu<\/button>'),n.common.applyReturn(i.saveFormInput,n.media.save),n.common.hideValidateMessages(t(i.saveForm)),t("#MediaType").change(function(){t("#Entity_Type").val(t(this).val())}),t(i.slug).focus(function(){n.common.get(i.getSlugUrl,{name:t(i.name).val()},function(n){t(i.slug).val(n)})}),n.media.initDropZone()):n.common.errorNotify("Đã có lỗi xảy ra")})};n.media.save=function(){var r=t(i.saveForm);n.common.hideValidateMessages(r);n.common.postForm(i.saveUrl,i.saveForm,function(u){u.success?(n.common.successNotify(u.message),n.common.hideModal("#modal"),n.media.search(t(i.pageNumber).val())):n.common.showValidateMessages(r,u.message)})};n.media.delete=function(r){n.common.postToDelete({message:"Bạn có muốn xóa hình ảnh này không?",deleteUrl:i.deleteUrl,deleteData:{id:r},callback:function(){var r=t(i.pageNumber).val();n.media.search(r)}})}})(window.comdy=window.comdy||{},jQuery);